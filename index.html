<!DOCTYPE html>
<html>
  <head>
    <title>Ip Info</title>
  </head>
  <body>
    <button onclick="doit()">Get Ip Info</button>
    <p id="out">No Output</p>
    <script>
      function doit() {
        document.getElementById("out").textContent = "";
        let out = "";
        let ip = "";
        let towrite = "";
        const url = "https://ipinfo.io/ip";
        //let url2;
        fetch(url, {
          method: 'GET',
          accept: '*/*',
          headers: {
            "Content-Type": "text/plain"
          },
          referer: "https://ipinfo.io"
        }).then((res) => res.text()
        .then((t) => {
          //out = t+String("\n");
          //alert(t);
          ip = t;
          fetch("https://ipinfo.io/widget/demo/"+t, {
            method: 'GET',
            accept: '*/*',
            headers: {
              "Content-Type": "application/json"
            },
            referer: "https://ipinfo.io"
          }).then((res2) => res2.text()
          .then((t2) => {
          //url2 = "https://ipinfo.io/widget/demo/"+t;
            alert(t2)
            //out = //ip+String.fromCharCode(10)+String(t2);
            const ep = document.getElementById("out");
            //ep.writeLine("ip: "+ip);
            //ep.writeLine("VPN: "+String(t2["data"]["privacy"]["VPN"]));
            
            //ep.textContent = String("ip: "+ip+"<br>"+String(t2)+"<br>");
            ep.innerHTML = String("ip: "+ip+"<br>"+String(t2)+"<br>");
            //ip += String(t2);
            
            //document.getElementById("out").textContent = out;
          }));
          //document.getElementById("out").textContent = out;
        }));
        
        //fetch(url2, {
      //    method: 'GET',
       //   accept: '*/*',
       //   headers: {
      //      "Content-Type": "application/json",
      //    },
      //    refferer: "https://ipinfo.io"
     //   }).then((res) => res.text()
      //  .then((t) => {
       //   alert(t);
       //   out = out+String(t);
     //   }));
        //const url2 = "https://ipinfo.io/widget/";
        /*fetch(url2, {
          method: 'GET',*/
          //accept: '*/*',
          /*headers: {
            "Content-Type": "text/plain",
          },
          refferer: "https://ipinfo.io"
        }).then((res) => res.text()
        .then((t) => {
          alert(t);
          //out = out+String(t);
        }));*/
        //fetch(url2).then((res) => res.text()
        //           .then((t) => {
        //             alert(t);
        //           }));
        //let e = document.getElementById("out");
        //e.value = out;
        
      }
    </script>
  </body>
</html>
