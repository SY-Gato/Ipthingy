<!DOCTYPE html>
<html>
  <head>
    <title>Ip Info</title>
  </head>
  <body>
    <button onclick="doit()">Get Ip Info</button>
    <p id="out">No Output</p>
    <script>
      function doit() {
        let out = "";
        //const url = "https://ipinfo.io/ip";
        //let url2;
        //fetch(url, {
        //  method: 'GET',
        //  accept: '*/*',
        /*  headers: {
            "Content-Type": "text/plain"
          },
          refferer: "https://ipinfo.io"
        }).then((res) => res.text()
        .then((t) => {
          //out = t+String("\n");
          alert(t);
          url2 = "https://ipinfo.io/widget/demo/"+t;
        }));
        
        fetch(url2, {
          method: 'GET',*/
         // accept: '*/*',
       //   headers: {
      //      "Content-Type": "application/json",
      //    },
      //    refferer: "https://ipinfo.io"
     //   }).then((res) => res.text()
      //  .then((t) => {
       //   alert(t);
       //   out = out+String(t);
     //   }));
        const url2 = "https://ipinfo.io/widget/";
        fetch(url2, {
          method: 'GET',
          accept: '*/*',
          headers: {
            "Content-Type": "application/json",
          },
          refferer: "https://ipinfo.io"
        }).then((res) => res.text()
        .then((t) => {
          alert(t);
          out = out+String(t);
        }));
        let e = document.getElementById("out");
        e.value = out;
        
      }
    </script>
  </body>
</html>
